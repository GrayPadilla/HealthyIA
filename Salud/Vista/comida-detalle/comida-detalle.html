<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detalle de Comida - Healthy IA</title>
  <link rel="icon" type="image/jpeg" href="../../imagenes/logo.jpg">
  <link rel="shortcut icon" type="image/jpeg" href="../../imagenes/logo.jpg">
  <link rel="stylesheet" href="comida-detalle.css" />
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">
      <img src="../../imagenes/logo.jpg" alt="logo" />
      <h2>Healthy IA</h2>
    </div>
    <nav>
      <a href="../Principal/principal.html">Home</a>
      <a href="../lista-comidas/lista-comidas.html">â† Volver a Lista</a>
      <a href="../mi-perfil/mi-perfil.html">Mi Perfil</a>
      <button class="ia" onclick="location.href='../IA-opciones/IA-opciones.html'">IA Nutricional</button>
    </nav>
  </header>

  <!-- LOADING -->
  <div id="loading" class="loading">
    <div class="spinner"></div>
    <p>Cargando informaciÃ³n nutricional...</p>
  </div>

  <!-- CONTENIDO PRINCIPAL -->
  <main id="mainContent" class="main-content hidden">
    <!-- HERO SECTION -->
    <section class="hero-section">
      <div class="hero-content">
        <div class="food-image-container">
          <img id="foodImage" src="" alt="" class="food-image">
          <div class="image-overlay">
            <button class="favorite-btn" onclick="toggleFavorite()">
              <span id="heartIcon">ğŸ¤</span>
            </button>
          </div>
        </div>
        
        <div class="food-info">
          <div class="category-badge" id="categoryBadge">
            <span id="categoryIcon"></span>
            <span id="categoryText"></span>
          </div>
          
          <h1 id="foodTitle">Nombre del Producto</h1>
          <p id="foodDescription">DescripciÃ³n del producto</p>
          
          <div class="quick-stats">
            <div class="stat">
              <span class="stat-value" id="caloriesValue">000</span>
              <span class="stat-label">kcal</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="timeValue">0</span>
              <span class="stat-label">min</span>
            </div>
            <div class="stat">
              <span class="stat-value" id="difficultyValue">FÃ¡cil</span>
              <span class="stat-label">dificultad</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- NAVEGACIÃ“N DE TABS -->
    <section class="tabs-section">
      <div class="tabs">
        <button class="tab active" data-tab="nutrition">ğŸ“Š NutriciÃ³n</button>
        <button class="tab" data-tab="ingredients">ğŸ¥¬ Ingredientes</button>
        <button class="tab" data-tab="preparation">ğŸ‘¨â€ğŸ³ PreparaciÃ³n</button>
        <button class="tab" data-tab="benefits">ğŸ’š Beneficios</button>
      </div>
    </section>

    <!-- CONTENIDO DE TABS -->
    <section class="tab-content-section">
      <!-- TAB NUTRICIÃ“N -->
      <div id="nutritionTab" class="tab-content active">
        <div class="nutrition-container">
          <div class="macros-circle">
            <div class="macro-item">
              <div class="macro-circle proteinas">
                <span class="macro-icon">ğŸ¥©</span>
              </div>
              <div class="macro-info">
                <h3>ProteÃ­nas</h3>
                <span id="proteinValue">0g</span>
              </div>
            </div>
            <div class="macro-item">
              <div class="macro-circle grasas">
                <span class="macro-icon">ğŸ¥‘</span>
              </div>
              <div class="macro-info">
                <h3>Grasas</h3>
                <span id="fatValue">0g</span>
              </div>
            </div>
            <div class="macro-item">
              <div class="macro-circle carbohidratos">
                <span class="macro-icon">ğŸ</span>
              </div>
              <div class="macro-info">
                <h3>Carbohidratos</h3>
                <span id="carbValue">0g</span>
              </div>
            </div>
          </div>

          <div class="detailed-nutrition">
            <h3>InformaciÃ³n Nutricional Detallada</h3>
            <div class="nutrition-grid">
              <div class="nutrition-item">
                <span class="nutrition-label">Fibra</span>
                <span class="nutrition-value" id="fiberValue">0g</span>
              </div>
              <div class="nutrition-item">
                <span class="nutrition-label">AzÃºcar</span>
                <span class="nutrition-value" id="sugarValue">0g</span>
              </div>
              <div class="nutrition-item">
                <span class="nutrition-label">Sodio</span>
                <span class="nutrition-value" id="sodiumValue">0mg</span>
              </div>
              <div class="nutrition-item">
                <span class="nutrition-label">CalorÃ­as totales</span>
                <span class="nutrition-value" id="totalCalories">0 kcal</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB INGREDIENTES -->
      <div id="ingredientsTab" class="tab-content">
        <div class="ingredients-container">
          <h3>Ingredientes Principales</h3>
          <div class="ingredients-list" id="ingredientsList">
            <!-- Se llenarÃ¡n dinÃ¡micamente -->
          </div>
          
          <div class="shopping-section">
            <h4>Â¿Necesitas comprar ingredientes?</h4>
            <button class="shopping-btn" onclick="createShoppingList()">
              ğŸ›’ Crear Lista de Compras
            </button>
          </div>
        </div>
      </div>

      <!-- TAB PREPARACIÃ“N -->
      <div id="preparationTab" class="tab-content">
        <div class="preparation-container">
          <div class="prep-header">
            <div class="prep-info">
              <span class="prep-time">â±ï¸ <span id="prepTime">0 min</span></span>
              <span class="prep-difficulty">ğŸ“Š <span id="prepDifficulty">FÃ¡cil</span></span>
            </div>
          </div>
          
          <h3>Pasos de PreparaciÃ³n</h3>
          <div class="preparation-steps" id="preparationSteps">
            <!-- Se llenarÃ¡n dinÃ¡micamente -->
          </div>

          <div class="tips-section">
            <h4>ğŸ’¡ Consejos del Chef</h4>
            <div class="tips-list">
              <div class="tip">
                <span class="tip-icon">ğŸ”¥</span>
                <p>MantÃ©n el fuego a temperatura media para evitar que se queme.</p>
              </div>
              <div class="tip">
                <span class="tip-icon">ğŸ§‚</span>
                <p>Sazona al gusto, siempre puedes agregar mÃ¡s sal despuÃ©s.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB BENEFICIOS -->
      <div id="benefitsTab" class="tab-content">
        <div class="benefits-container">
          <h3>Beneficios para la Salud</h3>
          <div class="benefits-grid" id="benefitsList">
            <!-- Se llenarÃ¡n dinÃ¡micamente -->
          </div>

          <div class="recommendations-section">
            <h4>Recomendaciones Personalizadas</h4>
            <div class="recommendation-card">
              <div class="recommendation-icon">ğŸ¯</div>
              <div class="recommendation-content">
                <h5>Para tu perfil</h5>
                <p id="personalizedRecommendation">Esta comida se adapta perfectamente a tus objetivos nutricionales.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ACCIONES -->
    <section class="actions-section">
      <button class="action-btn primary" onclick="addToMealPlan()">
        ğŸ“… Agregar a Mi Plan
      </button>
      <button class="action-btn secondary" onclick="shareRecipe()">
        ğŸ“¤ Compartir Receta
      </button>
      <button class="action-btn secondary" onclick="findSimilar()">
        ğŸ” Comidas Similares
      </button>
    </section>

    <!-- COMIDAS RELACIONADAS -->
    <section class="related-section">
      <h3>TambiÃ©n te podrÃ­a interesar</h3>
      <div class="related-foods" id="relatedFoods">
        <!-- Se llenarÃ¡n dinÃ¡micamente -->
      </div>
    </section>
  </main>

  <!-- BotÃ³n de Modo Oscuro/Claro -->
  <button type="button" id="darkModeToggle" class="dark-mode-toggle" aria-label="Cambiar modo oscuro/claro">
    <span class="toggle-icon">ğŸŒ™</span>
    <span class="toggle-text">Modo Oscuro</span>
  </button>

  <!-- ğŸ“Š Cargar sistema de mÃ©tricas primero -->
  <script src="../../Controlador/metricas.js"></script>
  <script src="../../Controlador/C-comida-detalle/comida-detalle.js"></script>
  <script>
    // Script para modo oscuro/claro
    document.addEventListener('DOMContentLoaded', function() {
      const darkModeToggle = document.getElementById('darkModeToggle');
      if (darkModeToggle) {
        darkModeToggle.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          document.body.classList.toggle('dark-mode');
          const isDark = document.body.classList.contains('dark-mode');
          const icon = this.querySelector('.toggle-icon');
          const text = this.querySelector('.toggle-text');
          if (icon && text) {
            icon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
            text.textContent = isDark ? 'Modo Claro' : 'Modo Oscuro';
          }
          localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
        });
        
        const savedMode = localStorage.getItem('darkMode');
        if (savedMode === 'enabled') {
          document.body.classList.add('dark-mode');
          const icon = darkModeToggle.querySelector('.toggle-icon');
          const text = darkModeToggle.querySelector('.toggle-text');
          if (icon && text) {
            icon.textContent = 'â˜€ï¸';
            text.textContent = 'Modo Claro';
          }
        }
      }
    });
  </script>
</body>
</html>